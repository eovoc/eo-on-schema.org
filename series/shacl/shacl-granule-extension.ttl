@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema: <https://schema.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix dctype: <http://purl.org/dc/dcmitype/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dash: <http://datashapes.org/dash#> .
@prefix eoshacl: <http://eovoc.esa.int/eoshacl#> .

@prefix owl: <http://www.w3.org/2002/07/owl#> .

@base <https://schema.org/> .

<http://eovoc.esa.int/eoshacl> 
	owl:imports <http://datashapes.org/dash> ;
  	owl:imports <http://datashapes.org/schema> .

#
#	Note:	To consume schema.org encoding as JSON-LD, the context has to be provided in the data file.
# 			When EO extensions to schema.org are used, also the jsonldcontext-eo context has to be included.
#         
#   "@context": "https://schema.org/docs/jsonldcontext.json".
# 
#	"@context": [
#		"https://raw.githubusercontent.com/eovoc/eo-on-schema.org/main/series/docs/jsonldcontext.json",
#		"https://raw.githubusercontent.com/eovoc/eo-on-schema.org/main/series/docs/jsonldcontext-eo.json"
#	],
#
#	"@context": [
#		"https://eovoc.spacebel.be/schema-org/docs/jsonldcontext.json",
#		"https://eovoc.spacebel.be/schema-org/docs/jsonldcontext-eo-short.json"
#	],
#

# 
#  § 7.1 - EO Granules Encoding extensions
#

eoshacl:EOEarthObservationShape
	a sh:NodeShape ;
	sh:targetClass schema:EarthObservation ;   # applies to all schema:EarthObservation
	# Must respect all shapes that have as explicit targetClass 'Dataset'.
	sh:node eoshacl:ResourceConstraintsShape ;
	sh:node eoshacl:AcquisitionInformationShape ;
	sh:node eoshacl:GranuleIdentificationShape ;

	sh:closed false ;

	sh:property [
		sh:path schema:parentIdentifier ;
		# optional, can be replaced by isPartOf as well.
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
	  	sh:or (
			[ sh:nodeKind sh:IRI ]
			[ sh:datatype xsd:string ]
		)
	] ;
	sh:property [
		sh:path schema:available ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
	  	sh:or (
			[ sh:datatype schema:DateTime ]
			[ sh:datatype xsd:string ]
		)
	] ;
	sh:property [
		sh:path schema:acquisitionInformation ;
	  	sh:minCount 1 ;
		sh:class schema:AcquisitionInformation 
	] ;
	sh:property [
		sh:path schema:productInformation ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:class schema:ProductInformation
	] ;
	sh:property [
		sh:path schema:acquisitionStatus ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		# sh:datatype xsd:string ;
		sh:nodeKind sh:IRI ; 
		sh:in (  <ARCHIVED> <ACQUIRED> <CANCELLED> <FAILED> <PLANNED> <POTENTIAL> <REJECTED> <QUALITYDEGRADED> )
	] .


# 
#  § 7.4.2 - Vertical Spatial Domain
#

eoshacl:EOVerticalSpatialDomainShape
	a sh:NodeShape ;
	sh:targetClass schema:VerticalSpatialDomain ;   # applies to all schema:VerticalSpatialDomain
	sh:node eoshacl:QuantitativeValueShape ;
	sh:ignoredProperties ( rdf:type schema:maxValue schema:minValue schema:unitText ) ;
	sh:closed true .

# 
#  § 7.4.3 - Orbit Parameters
#

eoshacl:EOOrbitParametersShape
	a sh:NodeShape ;
	sh:targetClass schema:OrbitParameters ;   # applies to all schema:OrbitParameters
	# See https://github.com/TopQuadrant/shacl-js/issues/22 
	sh:targetClass schema:AcquisitionParameters ;   # Parent inherits below properties.
	sh:closed false ;

	sh:property [
		sh:path schema:orbitDirection ;
	  	sh:minCount 1 ;
	  	sh:maxCount 1 ;
		sh:nodeKind sh:IRI ; 
		sh:in (  <ASCENDING> <DESCENDING> )
	] ;
	sh:property [
		sh:path schema:lastOrbitDirection ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:nodeKind sh:IRI ; 
		sh:in (  <ASCENDING> <DESCENDING> )
	] ;
	sh:property [
		sh:path schema:orbitDuration ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		# sh:datatype xsd:string   # (actual schema:Duration - see https://schema.org/docs/gs.html#advanced_dates and https://schema.org/Invoice example "billingPeriod": "P30D").
	] ;
	sh:property [
		sh:path schema:orbitNumber ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:minInclusive 0 ;
		sh:datatype xsd:integer
	] ;
	sh:property [
		sh:path schema:lastOrbitNumber ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:minInclusive 0 ;
		sh:datatype xsd:integer
	] ;
	sh:property [
		sh:path schema:ascendingNodeDate ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype schema:DateTime
	] ;
	sh:property [
		sh:path schema:ascendingNodeLongitude ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:maxInclusive 180 ;
		sh:minInclusive -180 ;
		sh:or (
			[ sh:datatype xsd:integer ]
			[ sh:datatype xsd:string ]
			[ sh:datatype xsd:double ]
		)
	] .

# 
#  § 7.6 - Acquisition Information
#

eoshacl:EOAcquisitionInformationShape
	a sh:NodeShape ;
	sh:targetClass schema:AcquisitionInformation ;   # applies to all schema:AcquisitionInformation
	sh:closed true ;
	sh:ignoredProperties ( rdf:type ) ;

	sh:property [
		sh:path schema:platform ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:class schema:Platform 
	] ;
	sh:property [
		sh:path schema:sensor ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:class schema:Instrument 
	] ;
	sh:property [
		sh:path schema:acquisitionParameters ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:class schema:AcquisitionParameters
	] .


# 
#  § 7.6.1 - Platform
#

eoshacl:EOPlatformShape
	a sh:NodeShape ;
	sh:targetClass schema:Platform ;   # applies to all schema:Platform
	sh:node eoshacl:DefinedTermShape ;
	sh:closed true ;
	sh:ignoredProperties ( rdf:type schema:sameAs schema:url schema:inDefinedTermSet schema:alternateName schema:termCode schema:additionalType ) ;

	sh:property [
		sh:path schema:name ;
	  	sh:minCount 1 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string 
	] ;
	sh:property [
		sh:path schema:serialNumber ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string 
	] ;
	sh:property [
		sh:path schema:orbitType ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:nodeKind sh:IRI ; 
		sh:in ( <LEO> <GEO> )
	] .


# 
#  § 7.6.2 - Instrument
#

eoshacl:EOInstrumentShape
	a sh:NodeShape ;
	sh:targetClass schema:Instrument ;   # applies to all schema:Instrument
	sh:closed true ;
	sh:ignoredProperties ( rdf:type schema:sameAs schema:url schema:inDefinedTermSet schema:alternateName schema:termCode schema:additionalType ) ;

	sh:property [
		sh:path schema:name ;
	  	sh:minCount 1 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string 
	] ;
	sh:property [
		sh:path schema:description ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string 
	] ;
	sh:property [
		sh:path schema:sensorType ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:nodeKind sh:IRI ;
		sh:in ( <OPTICAL> <ATMOSPHERIC> <ALTIMETRIC> <LIMB> <RADAR> )
	] .


# 
#  § 7.6.3 - WavelengthInformation
#

eoshacl:EOWavelengthInformationShape
	a sh:NodeShape ;
	sh:targetClass schema:WavelengthInformation ;   # applies to all schema:WavelengthInformation
	sh:node eoshacl:QuantitativeValueShape ;
	sh:closed true ;
	sh:ignoredProperties ( rdf:type schema:value schema:minValue schema:maxValue ) ;

	sh:property [
		sh:path schema:spectralRange ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:nodeKind sh:IRI ; 
		sh:in (  <INFRARED> <SWIR> <VISIBLE> <LWIR> <NIR> <FIR> <UV> <MWIR> <MICROWAVE> <SR_OTHER> )
	] ;
	sh:property [
		sh:path schema:wavelengthResolution ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:double 
	] .


# 
#  § 7.6.4 - AcquisitionParameters
#

eoshacl:EOAcquisitionParametersShape
	a sh:NodeShape ;
	sh:targetClass schema:AcquisitionParameters ;   # applies to all schema:AcquisitionParameters
	sh:node eoshacl:EOOrbitParametersShape ;        # check inherited properties
	sh:closed true ;
	sh:ignoredProperties ( rdf:type schema:value schema:minValue schema:maxValue schema:orbitDirection schema:lastOrbitDirection schema:orbitDuration schema:orbitNumber schema:lastOrbitNumber schema:ascendingNodeDate schema:ascendingNodeLongitude ) ;
	
	sh:property [
		sh:path schema:location ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:class schema:VerticalSpatialDomain       # subclass of VirtualLocation
	] ;
	
	sh:property [
		sh:path schema:acquisitionType ;
	  	sh:minCount 1 ;
	  	sh:maxCount 1 ;
		sh:nodeKind sh:IRI ; 
		sh:in (  <NOMINAL>  <CALIBRATION>  <ACQ_OTHER>  )
	] ;
	sh:property [
		sh:path schema:acquisitionSubType ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string 
	] ;
	sh:property [
		sh:path schema:startTimeFromAscendingNode ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:integer 
	] ;
	sh:property [
		sh:path schema:completionTimeFromAscendingNode ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:integer 
	] ;
	sh:property [
		sh:path schema:relativeOrbitNumber ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:integer 
	] ;
	sh:property [
		sh:path schema:wrsLongitudeGrid ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string
	] ;
	sh:property [
		sh:path schema:wrsLatitudeGrid ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string
	] ;
	sh:property [
		sh:path schema:tileId ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string
	] ;
	sh:property [
		sh:path schema:groundTrackUncertainty ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:cycleNumber ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:integer 
	] ;
	sh:property [
		sh:path schema:antennaLookDirection ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:nodeKind sh:IRI ; 
		sh:in (  <LEFT>  <RIGHT>  )
	] ;
	sh:property [
		sh:path schema:acquisitionStation ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string 	
	] ;
	sh:property [
		sh:path schema:acquisitionAngles ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:class schema:AcquisitionAngles 	
	] ;
	sh:property [
		sh:path schema:operationalMode ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string 
	] ;
	sh:property [
		sh:path schema:swathIdentifier ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string 
	] ;
	sh:property [
		sh:path schema:polarisationMode ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:nodeKind sh:IRI ; 
		sh:in (  <Q>  <S>  <D>  <T> <PM_UNDEFINED>  )
	] ;
	sh:property [
		sh:path schema:polarisationChannels ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:nodeKind sh:IRI ; 
		sh:in (  <HH_VV> <HH_VH> <VH_VV> <HH> <VH> <VV_HV> <HH_HV> <VV_VH> <VH_HV> <HH_HV_VH_VV> <HV_VH> <HV> <VV> <PC_UNDEFINED> )
	] ;
	sh:property [
		sh:path schema:resolution ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:verticalResolution ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:wavelengths ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:class schema:WavelengthInformation 	
	] ;
	sh:property [
		sh:path schema:measurementType ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:nodeKind sh:IRI ; 
		sh:in ( <EMISSION> <ABSORPTION> )
	] ;
	sh:property [
		sh:path schema:dopplerFrequency ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:samplingRate ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] .

# 
#  § 7.6.5 - AcquisitionAngles
#

eoshacl:EOAcquisitionAnglesShape
	a sh:NodeShape ;
	sh:targetClass schema:AcquisitionAngles ;   # applies to all schema:AcquisitionAngles

	sh:closed true ;
	sh:ignoredProperties ( rdf:type ) ;
	
	sh:property [
		sh:path schema:illuminationAzimuthAngle ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:illuminationZenithAngle ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:illuminationElevationAngle ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:incidenceAngle ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:class schema:QuantitativeValue
	] ;
	sh:property [
		sh:path schema:incidenceAngleVariation ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:acrossTrackIncidenceAngle ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:alongTrackIncidenceAngle ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:instrumentAzimuthAngle ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:instrumentZenithAngle ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:instrumentElevationAngle ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:pitch ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:yaw ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:roll ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] .


# 
#  § 7.7 - Product Information
#

eoshacl:EOProductInformationShape
	a sh:NodeShape ;
	sh:targetClass schema:ProductInformation ;   # applies to all schema:ProductInformation
	sh:shape schema:EOCoverageDescriptionShape ;
	sh:shape schema:EOProcessingInformationShape ;
	
	sh:closed true ;
	# ignore properties of the subclasses
	sh:ignoredProperties ( rdf:type schema:cloudCover schema:snowCover schema:compositeType schema:processingMethod schema:processingMethodVersion schema:processingCenter schema:processingDate schema:processingLevel schema:processingMode  schema:processorName schema:softwareVersion schema:productContentsType schema:encodingFormat) ;

	sh:property [
		sh:path schema:productType ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string
	] ;
	sh:property [
		sh:path schema:contentSize ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string
	] ;
	sh:property [
		sh:path schema:statusSubType ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string
	] ;
	sh:property [
		sh:path schema:statusDetail ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string
	] ;
	sh:property [
		sh:path schema:availabilityTime ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype schema:DateTime
	] ;
	sh:property [
		sh:path schema:timeliness ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string  
	] ;
	# productgroupId as isPartOf 
	sh:property [
		sh:path schema:version ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string  
	] ;
	sh:property [
		sh:path schema:holdingArchive ;
	  	sh:minCount 0 	
	] ;
	sh:property [
		sh:path schema:archivingDate ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype schema:DateTime
	] ;
	sh:property [
		# referenceSystemIdentifier encoded as additionalProperty
		sh:path schema:additionalProperty ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:class schema:PropertyValue
	] ;
	sh:property [
		sh:path schema:qualityInformation ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:class schema:QualityInformation 
	] .


# 
#  § 7.7.1 - Quality Information
#

eoshacl:EOQualityInformationShape
	a sh:NodeShape ;
	sh:targetClass schema:QualityInformation ;   # applies to all schema:QualityInformation
	
	sh:closed true ;
	sh:ignoredProperties ( rdf:type ) ;

	sh:property [
		sh:path schema:qualityStatus ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string
	] ;
	sh:property [
		sh:path schema:qualityDegradation ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:maxInclusive 100 ;
		sh:minInclusive 0 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:qualityDegradationQuotationMode ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string
	] ;
	sh:property [
		sh:path schema:qualityDegradationTag ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string
	] .


# 
#  § 7.7.2 - Processing Information
#

eoshacl:EOProcessingInformationShape
	a sh:NodeShape ;
	sh:targetClass schema:ProcessingInformation ;   # applies to all schema:ProcessingInformation
	sh:targetClass schema:ProductInformation ;      # parent class
	sh:closed false ;
	# sh:ignoredProperties ( rdf:type schema:cloudCover schema:snowCover schema:productType schema:contentSize schema:statusSubType schema:statusDetail schema:availabilityTime schema:timeliness schema:version schema:holdingArchive schema:archivingDate schema:additionalProperty schema:qualityInformation) ;

	sh:property [
		sh:path schema:compositeType ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string   # (actual schema:Duration)
	] ;
	sh:property [
		sh:path schema:processingMethod ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string
	];
	sh:property [
		sh:path schema:processingMethodVersion ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string
	] ;
	sh:property [
		sh:path schema:processingCenter ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string
	] ;
	sh:property [
		sh:path schema:processingDate ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype schema:DateTime 
	] ; 
	sh:property [
		sh:path schema:processingLevel ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string ;
		sh:in (  "1A"  "1B" "1C"  "2"  "3" )
	] ;
	sh:property [
		sh:path schema:processingMode ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string  
	] ;
	sh:property [
		sh:path schema:processorName ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string  
	] ;
	sh:property [
		sh:path schema:softwareVersion ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string  
	] ;
	sh:property [
		sh:path schema:encodingFormat ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;	 
		sh:or (
			[ sh:datatype xsd:string ]
			[ sh:nodeKind sh:IRI  ]
		) 
	] ;
	sh:property [
		sh:path schema:productContentsType ;
	  	sh:minCount 0 ;
		sh:class schema:DefinedTerm 
	] .

# 
#  § 7.7.3 - Coverage Description
#

eoshacl:EOCoverageDescriptionShape
	a sh:NodeShape ;
	sh:targetClass schema:CoverageDescription ;   # applies to all schema:CoverageDescription
	sh:targetClass schema:ProductInformation  ;   # parent class	
	sh:closed false ;
	# sh:ignoredProperties ( rdf:type schema:productType schema:contentSize schema:statusSubType schema:statusDetail schema:availabilityTime schema:timeliness schema:version schema:holdingArchive schema:archivingDate schema:additionalProperty schema:qualityInformation schema:compositeType schema:processingMethod schema:processingMethodVersion schema:processingCenter schema:processingDate schema:processingLevel schema:processingMode  schema:processorName schema:softwareVersion schema:productContentsType ) ;

	sh:property [
		sh:path schema:cloudCover ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:minInclusive 0 ;
		sh:maxInclusive 100 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:snowCover ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:minInclusive 0 ;
		sh:maxInclusive 100 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] .

#eoshacl:TargetSubjectsOfCloudCoverShape
#	a sh:NodeShape ;
#	sh:targetSubjectsOf schema:cloudCover ;
#	sh:property [
#		sh:path schema:cloudCover ;
#	  	sh:minCount 0 ;
#	  	sh:maxCount 1 ;
#		sh:minInclusive 0 ;
#		sh:maxInclusive 100 ;
#		sh:or (
#			[ sh:datatype xsd:double ]
#			[ sh:datatype xsd:integer ]
#		)
#	] .

#eoshacl:TargetSubjectsOfCloudCoverShape
#	a sh:NodeShape ;
#	sh:targetSubjectsOf schema:snowCover ;
#	sh:property [
#		sh:path schema:snowCover ;
#	  	sh:minCount 0 ;
#	  	sh:maxCount 1 ;
#		sh:minInclusive 0 ;
#		sh:maxInclusive 100 ;
#		sh:or (
#			[ sh:datatype xsd:double ]
#			[ sh:datatype xsd:integer ]
#		)
#	] .

#
# QuantitativeValueShape (simplified)
#

eoshacl:QuantitativeValueShape
	a sh:NodeShape ;
	sh:targetClass schema:QuantitativeValue;   # applies to all schema:QuantitativeValue

	sh:closed false ;
	sh:property [
		sh:path schema:value ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 
	] ;
	sh:property [
		sh:path schema:maxValue ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:minValue ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:or (
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:unitText ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
		sh:datatype xsd:string ;
		sh:in (  "m" "bar" )
	] .

# 
#  EO Granules Encoding
#

#
#  4.1 Metadata Information
#

eoshacl:ListItemShape
	a sh:NodeShape ;
	sh:targetClass schema:ListItem ;   # applies to all schema:ListItem
	sh:closed false ;
	sh:property [
		sh:path schema:encodingFormat ;
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
	  	sh:or (
			[ sh:nodeKind sh:IRI ]
			[ sh:datatype xsd:string ]
		)
	] ;
	# optional schema:inLanguage
   	sh:property [
	  	sh:path schema:dateCreated ; 
	  	sh:minCount 0 ;
	  	sh:maxCount 1 
   	] ;
	sh:property [
	  	sh:path schema:dateModified ;
	  	sh:minCount 1 ;
	  	sh:maxCount 1 
	] ;
	sh:property [
		sh:path schema:datePublished ;
		sh:minCount 0 ;
		sh:maxCount 1 
	] .


eoshacl:DateRangeShape  #  shape for all date ranges.
	a sh:NodeShape ;
	sh:targetObjectsOf schema:dateModified ;
	sh:targetObjectsOf schema:datePublished ;
	sh:targetObjectsOf schema:dateCreated ;    
	
	# sh:resultMessage "Value does not correspond to expected range." ;
	sh:closed false ;
	sh:minLength 10 ;  # format: 2021-12-08
	sh:maxLength 24 ;  # format: 2020-09-29T11:07:54.000Z
	sh:or (
			[ sh:datatype xsd:dateTime ]
			[ sh:datatype xsd:date ]
			[ sh:datatype schema:Date ]
			[ sh:datatype schema:DateTime ]
	) .
	

#
#  4.2.1 Resource Dates (Granule)
#

eoshacl:ResourceDatesShape
	a sh:NodeShape ;
	# sh:targetClass schema:Dataset ;  # applies to all schema:Dataset
	sh:targetSubjectsOf schema:isPartOf ;  # applies to all classes with this attribute, thus child Dataset.
		# sh:target [
		#	a dash:HasValueTarget ;  # applies to schema:Dataset of type "dcmitype/Dataset"
		#	dash:predicate schema:additionalType ;
		#	dash:object dctype:Dataset;
		# ] ;
	sh:closed false ;

	sh:property [
		sh:path schema:dateCreated ;
		sh:minCount 0 ;
		sh:maxCount 1 
	] ;	 
	sh:property [
		sh:path schema:dateModified ;
		sh:minCount 0 ;
		sh:maxCount 1 
	] ;
	sh:property [
		sh:path schema:datePublished ;
		sh:minCount 0 ;
		sh:maxCount 1 
	] ;
	sh:property [
		sh:path schema:temporalCoverage ;
		sh:datatype xsd:string ;
		sh:minCount 1 ;
		sh:or (
			[ sh:datatype xsd:string ]
			[ sh:datatype xsd:dateTime ]
		)
	] .


#
#  4.2.2 PropertyValue
#

eoshacl:PropertyValueShape
	a sh:NodeShape ;
	sh:targetClass schema:PropertyValue ;  # applies to all schema:PropertyValue
	# Be stricter than schema.org
	sh:closed true ;
	sh:ignoredProperties ( rdf:type ) ;
	sh:property [
		sh:path schema:value ;
		sh:minLength 1 ;    
		sh:minCount 0 ;				# Optional when used with "variableMeasured"
		# sh:maxCount 1 ;           # Multiple values can be used for "schema:additionalProperty"
		sh:or (
			[ sh:datatype xsd:string ]
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:url ;
		sh:nodeKind sh:IRI ;
		sh:minCount 0 ;
		sh:maxCount 1 
	] ;
	sh:property [
		sh:path schema:description ;
		sh:datatype xsd:string ;
		sh:minCount 0 ;
		sh:maxCount 1 
	] ;
	sh:property [
		sh:path schema:unitText ;
		sh:datatype xsd:string ;
		sh:minCount 0 ;
		sh:maxCount 1 
	] ;
	sh:property [
		sh:path schema:name ;
		sh:datatype xsd:string ;
		sh:minCount 0 ;
		sh:maxCount 1 
	] ;
	sh:property [
		sh:path schema:propertyID ;
		sh:datatype xsd:string ;         # According to schema.org, should be schema:URL or schema:Text.
		sh:minCount 1 ;
		sh:maxCount 1 
	] .

#
#  4.3 Resource Constraints
#

eoshacl:ResourceConstraintsShape
	a sh:NodeShape ;
	sh:targetClass schema:Dataset ;  # applies to all schema:Dataset
	sh:closed false ;
	sh:property [
		sh:path schema:license ;
		sh:minCount 0 ;
	
		sh:or (
			[ sh:nodeKind sh:IRI ]
			[ sh:class schema:CreativeWork ]
		)
	] ;
	sh:property [
		sh:path schema:conditionsOfAccess ;
		sh:datatype xsd:string ;
		sh:minCount 0 ;
	] .


eoshacl:CreativeWorkShape
	a sh:NodeShape ;
	sh:targetClass schema:CreativeWork ;  # applies to all schema:CreativeWork (range of schema:license)
	sh:closed false ;
	sh:property [
		sh:path schema:description ;
		sh:datatype xsd:string ;
		sh:minCount 1 
	] ;
	sh:property [
		sh:path schema:url ;
		sh:nodeKind sh:IRI ;
		sh:minCount 1 
	] .

#
#  4.4 DescriptiveKeywords
#

eoshacl:DescriptiveKeywordsShape
  	a sh:NodeShape ;
  	sh:targetClass schema:Dataset ;  # applies to all schema:Dataset
  	sh:closed false ;
	sh:property [
		sh:path schema:keywords ;
       	sh:minCount 0 ; 
      	sh:or (
	   		[ sh:datatype xsd:string ]
	   		[ sh:class schema:DefinedTerm ]
		)
  	] ;
	sh:property [
		sh:path schema:variableMeasured ;
       	sh:minCount 0 ; 
      	sh:or (
	   		[ sh:datatype xsd:string ]
	   		[ sh:class schema:PropertyValue ]
		)
  	] .

#
#  4.4.1 DefinedTerm
#

eoshacl:DefinedTermShape
	a sh:NodeShape ;
	sh:targetClass schema:DefinedTerm ;  # applies to all schema:DefinedTerm
	sh:closed false ;
	# sh:ignoredProperties ( rdf:type schema:url schema:description schema:alternateName) ;
	sh:property [
		sh:path schema:name ;
		sh:datatype xsd:string ;
		sh:minCount 0 ; 
		sh:maxCount 1 ; 
	] ;
	sh:property [
		sh:path schema:sameAs ;
		sh:nodeKind sh:IRI ;
		sh:minCount 0 ; 
	] ;
	sh:property [
		sh:path schema:inDefinedTermSet ;
		sh:nodeKind sh:IRI ;
		sh:minCount 0 ; 
		sh:maxCount 1 ; 
	] ;
	sh:property [
		sh:path schema:termCode ;
		sh:datatype xsd:string ;
		sh:minCount 0 ; 
		sh:maxCount 1 ; 
	] ;
	sh:property [
		sh:path schema:additionalType ;
		sh:nodeKind sh:IRI ;
		sh:minCount 0 ; 
		sh:maxCount 1 ;
	] .


#
#  4.5 SpatialInformation
#

eoshacl:SpatialInformationShape
	a sh:NodeShape ;
	# sh:targetClass schema:Dataset ;  # applies to all schema:Dataset
   	sh:targetSubjectsOf schema:isPartOf ;   # applies to all classes (Dataset) with this attribute, thus not the parent class.
	sh:closed false ;
	sh:property [
		sh:path schema:spatialCoverage ;
		sh:class schema:Place;
		sh:minCount 1				# mandatory footprint
	] .

eoshacl:PlaceShape
	a sh:NodeShape ;
	sh:targetClass schema:Place ;	# applies to all schema:Place
	sh:closed true ;
	sh:ignoredProperties ( rdf:type ) ;
	
	sh:property [
		sh:path schema:additionalProperty ;
		sh:class schema:PropertyValue;
		sh:minCount 0  
	] ;
	sh:property [
		sh:path schema:geo ;
		sh:minCount 1 ; 
		sh:or (
			[ sh:class schema:GeoCoordinates ]
			[ sh:class schema:GeoShape ]
		)
	] ;
	sh:property [
		sh:path schema:geoContains ;
		sh:minCount 0 
	] .


#
#  4.5.1 GeoShape
#

eoshacl:GeoShapeShape
	a sh:NodeShape ;
	sh:targetClass schema:GeoShape ;   # applies to all schema:GeoShape
	sh:closed true ;
	sh:ignoredProperties ( rdf:type ) ;

	sh:property [
		sh:path schema:box ;
		sh:datatype xsd:string ;
	  	sh:minCount 0 
	] ;
	sh:property [
		sh:path schema:polygon ;
		sh:datatype xsd:string ;
	  	sh:minCount 0  
	] ;
	sh:property [
	  	sh:path schema:line ;
	  	sh:datatype xsd:string ;
	  	sh:minCount 0  
	] .


#
#  4.5.2 GeoCoordinates
#

eoshacl:GeoCoordinatesShape
	a sh:NodeShape ;
	sh:targetClass schema:GeoCoordinates ;   # applies to all schema:GeoCoordinates
	sh:closed true ;
	sh:ignoredProperties ( rdf:type ) ;
	sh:property [
		sh:path schema:latitude ;   
		sh:minCount 0 ;
		sh:maxCount 1 ;
		sh:maxInclusive 90 ;
		sh:minInclusive -90 ;
		sh:or (
			[ sh:datatype xsd:string ]
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		) 
	] ;
	sh:property [
		sh:path schema:longitude ;
		sh:minCount 0 ; 
		sh:maxCount 1 ;
		sh:maxInclusive 180 ;
		sh:minInclusive -180 ;
		sh:or (
			[ sh:datatype xsd:string ]
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] ;
	sh:property [
		sh:path schema:elevation ;
		sh:minCount 0 ; 
		sh:or (
			[ sh:datatype xsd:string ]
			[ sh:datatype xsd:double ]
			[ sh:datatype xsd:integer ]
		)
	] .


#
#  4.6 Related URL
#

eoshacl:RelatedUrlShape
	a sh:NodeShape ;
	# sh:targetClass schema:Dataset ;   # applies to all schema:Dataset
	sh:targetSubjectsOf schema:isPartOf ;   # applies to all classes (Dataset) with this attribute, thus not the parent class.
	sh:closed false ;
	sh:property [
		sh:path schema:url ;       
		sh:minCount 0 ;
		sh:or (
			[ sh:nodeKind sh:IRI ]
			[ sh:class schema:LinkRole ]
		)
	] ;
	sh:property [
		sh:path schema:thumbnailUrl ;  
		sh:nodeKind sh:IRI ; 
		sh:minCount 0 
	] ;
	sh:property [
		sh:path schema:potentialAction ; 
		# how to indicate that any subclass of Action is allowed also without enumerating them ?
		sh:minCount 0 ; 
		sh:or (
			[ sh:class schema:Action  ]
			[ sh:class schema:SearchAction ]
			[ sh:class schema:CreateAction ]
		)
	] ;
	sh:property [
		sh:path schema:distribution ;  
		sh:class schema:DataDownload ; 
		sh:minCount 0 
	] ;
	sh:property [
		sh:path schema:subjectOf ;  
		sh:minCount 1 ;
		sh:or (
			[ sh:class schema:MediaObject]
			[ sh:class schema:ListItem ]     # See DataIdentificationShape
		)
	] .


eoshacl:LinkRoleShape
	a sh:NodeShape ;
	sh:targetClass schema:LinkRole ;   # applies to all schema:LinkRole
	sh:closed true ;
	sh:ignoredProperties ( rdf:type ) ;
	sh:property [
		sh:path schema:url ;   
		sh:nodeKind sh:IRI ;     
		sh:minCount 1 
	] ;
	sh:property [
		sh:path schema:name ;   
		sh:datatype xsd:string ;     
		sh:minCount 0 
	] ;
	sh:property [
		sh:path schema:linkRelationship ;   
		sh:datatype xsd:string ;     
		sh:minCount 1 
	] .


#
#  4.6.1 MediaObject
#

eoshacl:MediaObjectShape
	a sh:NodeShape ;
	sh:targetClass schema:MediaObject ;   # applies to all schema:MediaObject
	sh:targetClass schema:DataDownload ;  # applies to all schema:DataDownload 
	#  Not allowing additional properties to have stricter validation.
	sh:closed true ;
   	sh:ignoredProperties ( rdf:type schema:additionalType schema:inLanguage  ) ;

	sh:property [
		sh:path schema:contentUrl ;   
		sh:nodeKind sh:IRI ;     
		sh:minCount 1 ;
	] ;
	sh:property [
	  	sh:path schema:name ;   
	  	sh:datatype xsd:string ;     
		sh:minCount 0 ;
	] ;
	sh:property [
		sh:path schema:description ;   
		sh:datatype xsd:string ;     
		sh:minCount 0 ;
	] ;
	sh:property [
	  	sh:path schema:contentSize ;   
	  	sh:datatype xsd:string ;     
		sh:minCount 0 ;
	] ;
	sh:property [
	  	sh:path schema:encodingFormat ;        
		sh:minCount 0 ;
	  	sh:or (
			[ sh:nodeKind sh:IRI ]
			[ sh:datatype xsd:string ]
		)
	] .


eoshacl:DataDownloadShape
	a sh:NodeShape ;
	sh:targetClass schema:DataDownload ;  		# applies to all schema:DataDownload 
	sh:deactivated true ;					   	# specialisation of MediaObject 
	sh:closed false ;
	sh:property [
		sh:path schema:contentUrl ;   
	  	sh:nodeKind sh:IRI ;     
		sh:minCount 1 ;
	] .


#
#  4.6.2 Action
#


eoshacl:ActionShape
	a sh:NodeShape ;
	sh:targetClass schema:Action ;   # applies to all schema:Action including listed subclasses
	sh:targetClass schema:SearchAction ;
	sh:targetClass schema:CreateAction ;
	sh:targetClass schema:UseAction ;

	sh:closed false ;
	sh:property [
	  	sh:path schema:identifier ;        
	  	sh:minCount 0 ;
	  	sh:maxCount 1 ;
	  	sh:or (
			[ sh:datatype xsd:string ]
			[ sh:nodeKind sh:IRI ]
	  	)
	] ;
	sh:property [
		sh:path schema:target ;
		sh:minCount 0 ;
		# sh:maxCount 1 ;
		sh:or (
			[ sh:class schema:EntryPoint ]
			[ sh:datatype xsd:string ]
		)
	] .

#
#  EntryPoint
#

eoshacl:EntryPointShape
	a sh:NodeShape ;
	sh:targetClass schema:EntryPoint ;   # applies to all schema:EntryPoint
	sh:closed true ;
   	sh:ignoredProperties ( rdf:type ) ;

	sh:property [
	  	sh:path schema:identifier ;    
	  	sh:datatype xsd:string ;     
		sh:minCount 0 
	  	# range and multiplicity checked by schema:IdentifierPropertyShape
	] ;
	sh:property [
	  	sh:path schema:description ;   
	  	sh:datatype xsd:string ;     
		sh:minCount 0 
	] ;
	sh:property [
	  	sh:path schema:contentType ;   
	  	sh:datatype xsd:string ;     
		sh:minCount 0 
	] ;   
	sh:property [
	  	sh:path schema:encodingType ;   
	  	sh:datatype xsd:string ;     
		sh:minCount 0 
	] ;
	sh:property [
	  	sh:path schema:httpMethod ;   
	  	sh:datatype xsd:string ;     
		sh:minCount 0 
	] ;
	sh:property [
	  	sh:path schema:urlTemplate ;   
	  	sh:datatype xsd:string ;     
		sh:minCount 1 
	] .

#
#  SearchAction
#

eoshacl:SearchActionShape
	a sh:NodeShape ;
	sh:targetClass schema:SearchAction ;   # applies to all schema:SearchAction

	sh:closed true ;
   	sh:ignoredProperties ( rdf:type schema:target ) ;
	sh:property [
		sh:path schema:query-input ;   
		sh:class schema:PropertyValueSpecification ;     
		sh:minCount 0 ;
	] .

#
#  PropertyValueSpecification
#

eoshacl:PropertyValueSpecificationShape
	a sh:NodeShape ;
	sh:targetClass schema:PropertyValueSpecification ;   # applies to all schema:PropertyValueSpecification

	sh:closed true ;
   	sh:ignoredProperties ( rdf:type ) ;

	sh:property [
		sh:path schema:valueName ;   
		sh:datatype xsd:string ;     
		sh:minCount 1 ;
	] ;
	sh:property [
		sh:path schema:description ;   
		sh:datatype xsd:string ;     
		sh:minCount 0 ;
	] ;   
	sh:property [
		sh:path schema:valueRequired ;   
		sh:datatype xsd:boolean ;     
		sh:minCount 0 ;
	] ; 
	sh:property [
		sh:path schema:valuePattern ;   
		sh:datatype xsd:string ;     
		sh:minCount 0 ;
	] .



#
#  4.7 AcquisitionInformation
#

eoshacl:AcquisitionInformationShape
  	a sh:NodeShape ;
  	sh:targetClass schema:Dataset ;   # applies to all schema:Dataset
  	sh:closed false ;

  	sh:property [
		sh:path schema:measurementTechnique ;       
		sh:minCount 0 ;
	  	sh:or (
	   		[	sh:nodeKind sh:IRI ]
	   		[  	sh:datatype xsd:string ]
		)
 	] ;
 	sh:property [
	  	sh:path schema:potentialAction ; 
	  	sh:minCount 0 ; 
	 	sh:or (
	   		[  	sh:class schema:CreateAction ]
	   		[	sh:class schema:Action ]        # possible due to other Shape
	   		[  	sh:class schema:SearchAction ]  # possible due to other Shape
		)
  	] .


#
#  CreateAction
#

eoshacl:CreateActionShape
	a sh:NodeShape ;
	sh:targetClass schema:CreateAction ;   # applies to all schema:CreateAction

	# Be more strict than allowed by schema.org
	sh:closed true ;
	sh:ignoredProperties ( rdf:type ) ;
	sh:property [
		sh:path schema:instrument ;        
		sh:minCount 1 ;
		sh:class schema:DefinedTerm     
	] .



#
#  6.1 Granule Identification
#

# Next shape is not working;  Should allow isolating Datasets which are granule, collection or service.
# additional work required to analyse this.

#eoshacl:GranuleDatasetShape
#    a sh:NodeShape ;
#	sh:target [
#		a dash:HasValueTarget ;  # applies to all schema:Dataset
#		dash:predicate schema:additionalType ;
#		dash:object dctype:Dataset;
#	] ;
#    sh:property [
	#	a sh:PropertyShape ;
#        sh:path schema:collection ;
#        sh:datatype xsd:string ;
#        sh:name "collection" ;
#        sh:minCount 1       
#    ] .


eoshacl:GranuleIdentificationShape
	a sh:NodeShape ;
	# sh:targetClass schema:Dataset ;       # applies to all schema:Dataset
	sh:targetSubjectsOf schema:isPartOf ;   # applies to all classes with this attribute, thus not the parent class.
#   sh:target [
#		a dash:HasValueTarget ;  # applies to schema:Dataset of type "dcmitype/Dataset"
#		dash:predicate schema:additionalType ;
#		# dash:object dctype:Dataset;
#                dash:object  <http://purl.org/dc/dcmitype/Dataset>
#   ] ;
	sh:property [
		sh:path schema:name ;
		sh:datatype xsd:string ;
		sh:minCount 1       
	] ; 
	sh:property [
		sh:path schema:description ;
		sh:datatype xsd:string ;
		sh:minCount 1 
	] ;
	sh:property eoshacl:IdentifierPropertyShape;
	# additionalType is to include the constant <http://purl.org/dc/dcmitype/>
   	sh:property [
	  	sh:path schema:additionalType ;
	  	sh:nodeKind sh:IRI ;  
	  	sh:qualifiedValueShape [
		  	sh:hasValue dctype:Dataset
	  	] ;
	  	sh:qualifiedMinCount   1 ;
	  	sh:qualifiedMaxCount   1 ;
	];
   	sh:property [
	   	sh:path schema:isPartOf ;
	   	sh:minCount 1 ;
   	] ;
   	sh:property [
	   	sh:path schema:includedInDataCatalog ;
	   	sh:class schema:DataCatalog ;
	   	sh:minCount 1 ;
   	] ;
   	sh:property [
	   	sh:path schema:alternateName ;
	   	sh:datatype xsd:string ;
	   	sh:minCount 0 ;
   	] ;
   	# optional schema:inLanguage
   	sh:property [
	   	sh:path schema:subjectOf ;    
	   	sh:minCount 1 ;
	   	sh:or (
			[ sh:class schema:ListItem  ]
			[ sh:class schema:MediaObject ]
		)
	] .


#
#  DataCatalog
#

eoshacl:DataCatalogShape
	a sh:NodeShape ;
	sh:targetClass schema:DataCatalog ;  # applies to all schema:DataCatalog
	sh:closed false ;
	sh:property [
		sh:path schema:name ;
		sh:minCount 1 ; 
		sh:datatype xsd:string
	] .



#
#  Language
#

eoshacl:LanguageShape
	a sh:NodeShape ;
	sh:targetClass schema:Language ;  # applies to all schema:Language
	sh:closed false ;
	sh:property [
		sh:path schema:name ;
		sh:minLength 2;
		sh:maxLength 2;
		sh:datatype xsd:string ;
		sh:minCount 1 ;
		sh:maxCount 1 
	] .


eoshacl:InLanguageShape
	a sh:NodeShape ;
	sh:targetSubjectsOf schema:inLanguage ;  # applies to all classes with this attribute
	sh:closed false ;
	sh:property [
		sh:path schema:inLanguage ;
		sh:minCount 1 ; # redundant as the same as the relation mentioned in sh:targetSubjectsOf
		sh:maxCount 1 ;
		sh:or (
				[
					sh:nodeKind sh:IRI ;
					sh:class schema:Language
			   	]
			   	[
					sh:datatype xsd:string 
			   	]
		)
	] .

#
# Reusable (mandatory) property definitions
#

eoshacl:IdentifierPropertyShape
	a sh:PropertyShape ;

	sh:path schema:identifier ;
	sh:minCount 1 ;
	sh:or (
		[ sh:datatype xsd:string ]
		[ sh:class schema:PropertyValue ]
		[ sh:nodeKind sh:IRI ]
  	).




eoshacl:isPartOfShape  #  Shape for Dataset representing the granule
	a sh:NodeShape ;
	sh:targetSubjectsOf schema:isPartOf ;  # applies to objects in domain of "isPartOf"
	sh:closed false ;
	sh:property [
		sh:path schema:isPartOf ;
		sh:minCount 1 ; # redundant as the same as the relation mentioned in sh:targetSubjectsOf
		sh:maxCount 1 ;
		sh:nodeKind sh:IRI 
	] ;
	sh:property [
		# check that the domain class has type schema:Dataset or EarthObservation as this is not checked in its Shape.
		sh:path rdf:type ; 
		sh:qualifiedValueShape [
			sh:or (
				[ sh:hasValue schema:EarthObservation ]
				[ sh:hasValue schema:Dataset ]
  			)
		] ;
		sh:qualifiedMinCount   1 ;
		sh:qualifiedMaxCount   1 
	].



eoshacl:ParentShape  #  Shape for Dataset representing the collection the granule is partOf
	a sh:NodeShape ;
	# avoid checking the Dataset object as we require a minimal number of properties
	sh:targetObjectsOf schema:isPartOf ; # applies to objects in range of "isPartOf"

	sh:closed false ;
	
	sh:property [
		# Allow for object of type Dataset or for a URI (without a type)
		sh:or (
			[
				sh:path rdf:type ; 
				sh:qualifiedValueShape [	
					sh:hasValue schema:Dataset 
				] ;
				sh:qualifiedMinCount   1 ;
				sh:qualifiedMaxCount   1 
			]
			[ 	
				sh:nodeKind sh:IRI ;
				sh:not [
					sh:path rdf:type ;
					sh:minCount 1 
				]
			]
		)
	  ].
