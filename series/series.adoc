[[Chapter-3]]
== EO Collections

This chapter defines the encoding of the different parts of the Data Model.  We use a presentation which is similar to the GeoJSON Encoding Specifications in <<OGC17-003>>, <<OGC17-047>> and <<OGC17-084>>.

==== Dataset

[#img_object_term,reftext='{figure-caption} {counter:figure-num}']
.Dataset Schema
image::images/Dataset.png[align="center"]

The complete decription of Term is given in <<table_object_dataset>>.  

[#table_object_dataset,reftext='{table-caption} {counter:table-num}']
.Dataset object properties
[cols="<20m,<50,<15,<15",width="100%",options="header",align="center"]
|===
|JSON Property | Definition | Data type and values | Multiplicity and use

a| @context +
~$.@context~
| Optional context property.
| Range: String +
Fixed value: "https://schema.org"
| Zero or one (optional)

a| @type +
~$.@type~
| Type of the object. This property has the fixed value "Dataset".
| Range: String +
Fixed value: "Dataset"
| One (mandatory)

a| name +
~$.name~
| The name of the collection.
| Domain: Thing +
Range: Text
| One (mandatory)

a| description +
~$.description~
| A description of the collection.
| Domain: Thing +
Range: Text
| Zero or one (optional)
|===

.Dataset encoding example
[source,json]
----
{
	"@context": "http://schema.org",
	"@type": "Dataset",
	"name": "PROBA-V S1 TOA 1KM: product resolution data, best-quality daily synthesis. Maximum Value Compositing (MVC)is applied.",
	"alternateName": "urn:ogc:def:EOP:VITO:PROBAV_S1-TOA_1KM_V001",
	"description": "Level 3 data products are variables mapped on uniform space-time grid scales and are the result of combiningmultiple scenes (e.g. S1/S10) to cover the userâ€™s region of interest.",
	"provider": {
		"@type": "Organization",
		"name": "VITO (Flemish Institute for Technological Research)",
		"address": {
			"@type": "PostalAddress",
			"addressCountry": "Belgium",
			"addressLocality": "Mol",
			"postalCode": "B-2400",
			"streetAddress": "Boeretang 200"
		},
		"telephone": "+32 14 33 68 14",
		"faxNumber": "+32 14 32 27 95",
		"email": "helpdeskticket@vgt.vito.be",
		"url": "http://proba-v.vgt.vito.be/"
	},
	"dateModified": "2018-10-23T15:52:07Z",
	"keywords": "EARTH SCIENCE>LAND SURFACE>LAND USE/LAND COVER, EARTH SCIENCE>CLIMATEINDICATORS>CRYOSPHERIC INDICATORS>SNOW COVER, Land cover, Cloud, Radiometric quality, Shadow, Snow, landuse, proba, environmental monitoring facilities, land cover, Proba-V",
	"temporal": "2013-10-16T00:00:00Z/2018-12-31T00:00:00Z",
	"spatial": {
		"@type": "Place",
		"geo": {
			"@type": "GeoShape",
			"polygon": "-56.0 -180.0 -56.0 180.0 75.0 180.0 75.0 -180.0 -56.0 -180.0"
		}
	},
	"image": "http://geo.spacebel.be/opensearch/images/vito.png",
	"thumbnailUrl": "http://geo.spacebel.be/opensearch/images/vito.png"
}
----



=== GeoJSON EOPAD Metadata Encoding

==== Requirements class: Feature

The Feature object represents the EO application/service metadata a.k.a. EOPAD metadata.  It inherits all properties of the GeoJSON Feature object.  In addition, it may contain an optional @context property.  The @context properties shall typically be absent in the GeoJSON encoding and implicitly refer to the normative @context defined in <<Annex-B,Annex B>>.

[#img_object_feature,reftext='{figure-caption} {counter:figure-num}']
.Feature Schema
image::diagrams/figure1.png[align="center"]

Service/applications can be distinguished from EO collections and EO products via their Feature type.  The feature type corresponds to  the _dct:type_ property (JSON-LD) as per the resource type and spatial data service type defined in <<GeoDCAT-AP>> and its JSON equivalent _kind_ that is defined in <<OGC17-047,OGC 17-047>>.  A code list for services/application similar to http://inspire.ec.europa.eu/metadata-codelist/SpatialDataServiceCategory[INSPIRE Classification of Spatial Services] allows distinguishing different service categories, including _human interaction services_.

[#table_resource_types,reftext='{table-caption} {counter:table-num}']
.Resource types
[cols="<20m,<20,<20,<40",width="100%",options="header",align="center"]
|===
| Resource | $.type | JSON-LD @type | $.properties.kind or JSON-LD dct:type

a| EO Service/Application
| Feature
| dcat:DataService
a| * http://purl.org/dc/dcmitype/Service +
* http://inspire.ec.europa.eu/metadata-codelist/ResourceType/service +
* http://inspire.ec.europa.eu/metadata-codelist/SpatialDataServiceType/view

a| EO Collection +
(OGC 17-084)
| Feature
| dcat:Dataset
a| * http://purl.org/dc/dcmitype/Collection +
* http://inspire.ec.europa.eu/metadata-codelist/ResourceType/series

a| EO Product +
(OGC 17-003)
| Feature
| gj:Feature +
eop:EarthObservation
a| * http://purl.org/dc/dcmitype/Dataset +
* http://inspire.ec.europa.eu/metadata-codelist/ResourceType/dataset
|===


.Term encoding example
[source,json]
----
{
	"actualTerm": "ENVISAT",
	"query": {
		"count": "1",
		"searchTerms": "vegetation",
		"startIndex": "1",
		"sru:recordSchema": "server-choice",
		"eo:platform": "ENVISAT"
	},
	"requestUrl": "http://fedeo.esa.int/opensearch/request?query=vegetation&startRecord=1&maximumRecords=1&httpAccept=application/geo%2Bjson&&platform=ENVISAT",
	"count": "1"
}
----

and here is a second example with include statement

[source,json]
----
include::./examples/example1.json[]
----
