[[Chapter-3]]
== EO Collections

This section defines the encoding of Earth Observation collection metadata.  We use a presentation similar to the GeoJSON Encoding Specifications in https://docs.ogc.org/is/17-003r2/17-003r2.html[OGC17-003r2], https://docs.ogc.org/per/19-020r1.html[OGC19-020r1] and <<OGC17-084r1>>.  The graphical notation is borrowed from https://github.com/ESIPFed/science-on-schema.org/tree/master/assets/diagrams[science-on-schema.org]. The diagrams are prepared with PlantUML.

=== Dataset

[#img_object_dataset,reftext='{figure-caption} {counter:figure-num}']
.Dataset Schema
image::diagrams/Dataset.png[align="center"]

The complete decription of Dataset is given in <<table_object_dataset>>.  

[#table_object_dataset,reftext='{table-caption} {counter:table-num}']
.Dataset object properties
[cols="<20m,<50,<15,<15",width="100%",options="header",align="center"]
|===
|JSON Property | Definition | Data type and values | Multiplicity and use

a| @context +
~$.@context~
| Optional context property.
| Range: String +
Fixed value: "https://schema.org"
| Zero or one (optional)

a| @type +
~$.@type~
| Type of the object. This property has the fixed value "Dataset".
| Range: String +
Fixed value: "Dataset"
| One (mandatory)

a| description +
~$.description~
| A description of the collection.
| Domain: Thing +
Range: Text
| Zero or one (optional)

a| identifier +
~$.identifier~
| Identifier given to the collection.
| Domain: Thing +
Range: Text or Url or PropertyValue +
See also section TBD.
| Zero or one (optional)

a| name +
~$.name~
| The name of the collection.
| Domain: Thing +
Range: Text
| One (mandatory)


a| temporal +
~$.temporal~
| Date or range of dates relevant for the resource.  For example: "1999-07-01T00:00:00Z/2003-12-31T00:00:00Z"
| Domain: Dataset +
Range: DateTime or Text
| Zero or one (optional)
|===

.Dataset encoding example
[source,json]
----
{
	"@context": "http://schema.org",
	"@type": "Dataset",
	"name": "PROBA-V S1 TOA 1KM: product resolution data, best-quality daily synthesis. Maximum Value Compositing (MVC)is applied.",
	"alternateName": "urn:ogc:def:EOP:VITO:PROBAV_S1-TOA_1KM_V001",
	"description": "Level 3 data products are variables mapped on uniform space-time grid scales and are the result of combiningmultiple scenes (e.g. S1/S10) to cover the userâ€™s region of interest.",
	"provider": {
		"@type": "Organization",
		"name": "VITO (Flemish Institute for Technological Research)",
		"address": {
			"@type": "PostalAddress",
			"addressCountry": "Belgium",
			"addressLocality": "Mol",
			"postalCode": "B-2400",
			"streetAddress": "Boeretang 200"
		},
		"telephone": "+32 14 33 68 14",
		"faxNumber": "+32 14 32 27 95",
		"email": "helpdeskticket@vgt.vito.be",
		"url": "http://proba-v.vgt.vito.be/"
	},
	"dateModified": "2018-10-23T15:52:07Z",
	"keywords": "EARTH SCIENCE>LAND SURFACE>LAND USE/LAND COVER, EARTH SCIENCE>CLIMATEINDICATORS>CRYOSPHERIC INDICATORS>SNOW COVER, Land cover, Cloud, Radiometric quality, Shadow, Snow, landuse, proba, environmental monitoring facilities, land cover, Proba-V",
	"temporal": "2013-10-16T00:00:00Z/2018-12-31T00:00:00Z",
	"spatial": {
		"@type": "Place",
		"geo": {
			"@type": "GeoShape",
			"polygon": "-56.0 -180.0 -56.0 180.0 75.0 180.0 75.0 -180.0 -56.0 -180.0"
		}
	},
	"image": "http://geo.spacebel.be/opensearch/images/vito.png",
	"thumbnailUrl": "http://geo.spacebel.be/opensearch/images/vito.png"
}
----


=== PropertyValue (identifier)

[#img_object_propertyvalue,reftext='{figure-caption} {counter:figure-num}']
.Dataset Schema
image::diagrams/PropertyValue.png[align="center"]

The complete decription of PropertyValue is given in <<table_object_propertyvalue>>.  

.PropertyValue encoding example
[source,json]
----
{
	"@context": {
		"@vocab": "https://schema.org/"
	},
	"@type": "Dataset",
	"name": "ESA Sea Surface Temperature Climate Change Initiative (ESA SST CCI): GHRSST Multi-Product ensemble (GMPE)",
	"identifier": {
		"@id": "https://doi.org/10.5285/7BAF7407-2F15-406C-8F09-CB9DC10392AA",
		"@type": "PropertyValue",
		"propertyID": "https://registry.identifiers.org/registry/doi",
		"value": "doi:10.5285/7BAF7407-2F15-406C-8F09-CB9DC10392AA",
		"url": "https://doi.org/10.5285/7BAF7407-2F15-406C-8F09-CB9DC10392AA"
	}
}
----


== Property Mapping

=== OGC17-084r1 Metadata

|===
| GeoJSON Property | JSON-LD Property |   schema.org | schema.org Reference | Reference

a| abstract +
~$.properties.abstract~     | dct:description |  $.description      | https://schema.org/description  |    <<table_object_dataset>>

a| created +
~$.properties.created~     | dct:created |                |  |    

a| created +
~$.properties.isPrimaryTopicOf.created~    | dct:created |                |  | 

a| date +
~$.properties.date~       | dct:date |   $.temporal            |  https://schema.org/temporal | 

a| doi +
~$.properties.doi~        | adms:identifier  |             |   | 

a| identifier +
~$.properties.identifier~   | dct:identifier |   $.identifier        |  https://schema.org/identifier |  <<table_object_dataset>>

a| title +
~$.properties.title~        | dct:title |  $.name              | https://schema.org/name |    <<table_object_dataset>>

|===

=== STAC Collection Metadata

TBD.




